<main class="demo-layout">
  <section class="demo-container">
    <header class="demo-header">
      <h1>{{ title }}</h1>
      <p>
        Vista de referencia para todos los √≠conos registrados. Ejecuta
        <code>npm run icons:manifest</code>
        tras agregar SVGs nuevos.
      </p>
      <div class="demo-tags">
        <span>Angular 14.3</span>
        <span>@weibook/icons-angular</span>
        <span>wb-icon-gallery</span>
      </div>
    </header>

    <div class="demo-search">
      <label for="icon-search">Buscar iconos</label>
      <input
        id="icon-search"
        type="search"
        [(ngModel)]="searchQuery"
        placeholder="Ej. download, filled, outlined"
        aria-label="Buscar iconos por nombre o variante"
      />
</div>

<!--

-->
    <div class="demo-grid">
      <wb-icon-gallery
        title="Todos los √≠conos"
        [search]="searchQuery"
        (iconClick)="handleIconClick($event)"
      ></wb-icon-gallery>
      <wb-icon-gallery
        title="Variante filled"
        variant="filled"
        [search]="searchQuery"
        (iconClick)="handleIconClick($event)"
      ></wb-icon-gallery>
      <wb-icon-gallery
        title="Variante outlined"
        variant="outlined"
        [search]="searchQuery"
        (iconClick)="handleIconClick($event)"
      ></wb-icon-gallery>

      <!--
      <section class="demo-playground">
        <h2>Playground</h2>
        <p>
          Ajusta tama√±o, color, animaciones y texto inline para probar el
          comportamiento del componente.
        </p>

        <div class="demo-playground__section">
          <h3>Animaci√≥n Constante</h3>
          <div class="demo-playground__icon">
            <wb-icon size="4rem" animation="shake" ariaLabel="Descargar con animaci√≥n">
              download
            </wb-icon>
          </div>
        </div>

        <div class="demo-playground__section">
          <h3>Animaci√≥n Din√°mica</h3>
          <p class="demo-playground__hint">La animaci√≥n cambia seg√∫n el estado</p>
          <div class="demo-playground__icon">
            <wb-icon 
              name="star" 
              size="3rem"
              color="warning"
              [animation]="isAnimating ? 'pulse' : ''"
              (iconClick)="toggleAnimation()"
              transition
              [attr.aria-label]="isAnimating ? 'Detener animaci√≥n' : 'Iniciar animaci√≥n'"
            ></wb-icon>
          </div>
          <p class="demo-playground__status">
            Animaci√≥n: {{ isAnimating ? 'Pulse activa' : 'Sin animaci√≥n' }}
          </p>
        </div>

        <div class="demo-playground__section">
          <h3>Stroke Din√°mico</h3>
          <p class="demo-playground__hint">Controla el grosor y color del borde (soporta valores menores a 1)</p>
          <div class="demo-playground__icon">
            <wb-icon 
              name="heart" 
              size="3rem"
              color="danger"
              [strokeWidth]="hasThickStroke ? '3' : '0'"
              [stroke]="hasThickStroke ? 'primary' : 'danger'"
              (iconClick)="toggleStroke()"
              transition
              [attr.aria-label]="'Coraz√≥n con stroke din√°mico'"
            ></wb-icon>
          </div>
          <p class="demo-playground__status">
            Stroke: {{ hasThickStroke ? 'Ancho 2, color primary' : 'Ancho 0.5, color danger' }}
          </p>
        </div>


        <div class="demo-playground__section">
          <h3>Click con Evento Personalizado</h3>
          <div class="demo-playground__icon">
              <wb-icon 
              name="check" 
                size="3rem"
              color="success"
              (iconClick)="handlePlaygroundClick($event)"
              [tabIndex]="0"
              style="cursor: pointer;"
              ariaLabel="Check con evento personalizado"
              ></wb-icon>
          </div>
          <p class="demo-playground__feedback" *ngIf="clickCount > 0">
            ¬°Clicks: {{ clickCount }}!
          </p>
            </div>

        <div class="demo-playground__section">
          <h3>Color Din√°mico + Click Animation</h3>
          <div class="demo-playground__icon">
              <wb-icon 
              name="heart" 
                size="3rem"
              [color]="favorite1 ? 'danger' : 'primary'"
              (iconClick)="toggleFavorite1()"
              [attr.aria-label]="favorite1 ? 'Quitar de favoritos' : 'Agregar a favoritos'"
              ></wb-icon>
          </div>
          <p class="demo-playground__status">
            Estado: {{ favorite1 ? 'Favorito ‚ù§Ô∏è' : 'No favorito' }}
          </p>
            </div>

        <div class="demo-playground__section">
          <h3>Tama√±o Din√°mico</h3>
          <div class="demo-playground__icon">
              <wb-icon 
                name="star" 
              [size]="size1"
                color="warning"
              (iconClick)="toggleSize1()"
              [attr.aria-label]="isLarge1 ? 'Hacer peque√±o' : 'Hacer grande'"
              ></wb-icon>
          </div>
          <p class="demo-playground__status">
            Tama√±o: {{ size1 }} ({{ isLarge1 ? 'Grande' : 'Peque√±o' }})
          </p>
            </div>

        <div class="demo-playground__section">
          <h3>Con Transiciones (transition)</h3>
          <p class="demo-playground__hint">Los cambios de tama√±o y color son suaves</p>
          <div class="demo-playground__icon">
              <wb-icon 
              name="star" 
              [size]="size2"
              [color]="favorite2 ? 'gray' : 'warning'"
              (iconClick)="toggleSize2(); toggleFavorite2()"
              transition
              [attr.aria-label]="isLarge2 ? 'Hacer peque√±o' : 'Hacer grande'"
              ></wb-icon>
          </div>
          <p class="demo-playground__status">
            Tama√±o: {{ size2 }} | Color: {{ favorite2 ? 'Warning' : 'Gray' }}
          </p>
            </div>

        <div class="demo-playground__section">
          <h3>Todo Din√°mico: Tama√±o + Color + Icono (Con Transiciones)</h3>
          <div class="demo-playground__icon">
            <wb-icon 
              [name]="favorite3 ? 'heart' : 'star'"
              [size]="size3"
              [color]="favorite3 ? 'danger' : 'warning'"
              (iconClick)="toggleFavorite3(); toggleSize3()"
              transition
              [attr.aria-label]="favorite3 ? 'Quitar favorito y cambiar tama√±o' : 'Agregar favorito y cambiar tama√±o'"
            ></wb-icon>
          </div>
          <p class="demo-playground__status">
            Icono: {{ favorite3 ? 'Heart' : 'Star' }} | 
            Tama√±o: {{ size3 }} | 
            Color: {{ favorite3 ? 'Danger' : 'Warning' }}
          </p>
        </div>

        <div class="demo-playground__section">
          <h3>Icon Morphing (Play ‚Üî Pause)</h3>
          <p class="demo-playground__hint">Cambio suave entre dos iconos</p>
          <div class="demo-playground__icon">
              <wb-icon 
              from="play"
              to="pause"
              [active]="isPlaying"
              size="4rem"
              color="primary"
              (iconClick)="togglePlayPause()"
              transition
              [attr.aria-label]="isPlaying ? 'Pausar' : 'Reproducir'"
              ></wb-icon>
          </div>
          <p class="demo-playground__status">
            Estado: {{ isPlaying ? 'Pausando ‚è∏Ô∏è' : 'Reproduciendo ‚ñ∂Ô∏è' }}
          </p>
            </div>

        <div class="demo-playground__section">
          <h3>Prueba con *ngIf (Simula activeSecondaryMenu)</h3>
          <p class="demo-playground__hint">Prueba el comportamiento cuando el icono puede ser undefined</p>
          <div class="demo-playground__icon">
            <button (click)="toggleSecondaryMenu()" style="margin-bottom: 1rem; padding: 0.5rem 1rem;">
              {{ activeSecondaryMenu ? 'Ocultar' : 'Mostrar' }} Men√∫
            </button>
            <br>
            <wb-icon 
              *ngIf="activeSecondaryMenu" 
              class="title-icon" 
              [name]="activeSecondaryMenu?.icon"
              size="2rem"
              color="primary"
            ></wb-icon>
            <wb-icon 
              *ngIf="activeSecondaryMenu?.icon" 
              class="title-icon" 
              [name]="activeSecondaryMenu?.icon"
              size="2rem"
              color="success"
              style="margin-left: 1rem;"
            ></wb-icon>
          </div>
          <p class="demo-playground__status">
            Men√∫ activo: {{ activeSecondaryMenu ? 'S√≠' : 'No' }} | 
            Icono: {{ activeSecondaryMenu?.icon || 'undefined' }}
          </p>
        </div>

        <div class="demo-playground__section">
          <h3>üö® PRUEBA CR√çTICA: Simulaci√≥n Dashboard Component</h3>
          <p class="demo-playground__hint" style="color: #dc2626; font-weight: bold;">
            Esta prueba simula exactamente el caso del dashboard con *ngIf y cambios din√°micos entre iconos
          </p>
          <div class="demo-playground__icon" style="border: 2px solid #dc2626; padding: 1rem; border-radius: 8px;">
            <div style="margin-bottom: 1rem;">
              <button 
                (click)="openDashboardMenu('reports')" 
                style="margin-right: 0.5rem; padding: 0.5rem 1rem; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer;">
                Abrir Men√∫ Reports (history)
              </button>
              <button 
                (click)="openDashboardMenu('sales-reports')" 
                style="margin-right: 0.5rem; padding: 0.5rem 1rem; background: #10b981; color: white; border: none; border-radius: 4px; cursor: pointer;">
                Abrir Men√∫ Sales (bar-chart)
              </button>
              <button 
                (click)="rapidToggleMenu()" 
                style="padding: 0.5rem 1rem; background: #dc2626; color: white; border: none; border-radius: 4px; cursor: pointer;">
                ‚ö†Ô∏è Cambio R√°pido (Prueba Bug)
              </button>
            </div>
            
            <div class="title-with-icon" style="display: flex; align-items: center; gap: 0.5rem;">
              <wb-icon 
                *ngIf="activeSecondaryMenu?.icon === 'history'"
                class="title-icon" 
                name="history"
                size="2rem"
                color="primary">
              </wb-icon>
              <wb-icon 
                *ngIf="activeSecondaryMenu?.icon === 'bar-chart'"
                class="title-icon" 
                name="bar-chart"
                size="2rem"
                color="success">
              </wb-icon>
              <h2 style="margin: 0; font-size: 1.25rem;">
                {{ activeSecondaryMenu?.title || 'No Menu' }}
              </h2>
            </div>
          </div>
          <p class="demo-playground__status" style="color: #dc2626; font-weight: bold;">
            ‚ö†Ô∏è Estado: Men√∫ = {{ dashboardMenuType || 'null' }} | 
            Icono = {{ activeSecondaryMenu?.icon || 'null' }} | 
            T√≠tulo = {{ activeSecondaryMenu?.title || 'null' }}
          </p>
          <p style="color: #666; font-size: 0.875rem; margin-top: 0.5rem;">
            <strong>Nota:</strong> Si la aplicaci√≥n se congela o explota al hacer clic en "Cambio R√°pido", 
            el bug est√° presente. Con la correcci√≥n, deber√≠a funcionar sin problemas.
          </p>
        </div>

        <div class="demo-playground__section">
          <h3>Prueba con condiciones booleanas en *ngIf</h3>
          <p class="demo-playground__hint">Prueba diferentes tipos de condiciones: ===, !variable, etc.</p>
          <div class="demo-playground__icon">
            <div style="margin-bottom: 1rem;">
              <button (click)="toggleTestString()" style="margin-right: 1rem; padding: 0.5rem 1rem;">
                Toggle String ({{ testString || 'vac√≠o' }})
              </button>
              <wb-icon 
                *ngIf="testString === 'ola'" 
                name="check-circle"
                size="2rem"
                color="success"
              ></wb-icon>
              <span style="margin-left: 0.5rem; color: #666;">
                *ngIf="testString === 'ola'"
              </span>
            </div>

            <div style="margin-bottom: 1rem;">
              <button (click)="toggleTestBoolean()" style="margin-right: 1rem; padding: 0.5rem 1rem;">
                Toggle Boolean ({{ testBoolean }})
              </button>
              <wb-icon 
                *ngIf="!testBoolean" 
                name="x-circle"
                size="2rem"
                color="danger"
              ></wb-icon>
              <span style="margin-left: 0.5rem; color: #666;">
                *ngIf="!testBoolean"
              </span>
            </div>

            <div style="margin-bottom: 1rem;">
              <button (click)="toggleTestNumber()" style="margin-right: 1rem; padding: 0.5rem 1rem;">
                Toggle Number ({{ testNumber }})
              </button>
              <wb-icon 
                *ngIf="testNumber === 1" 
                name="star"
                size="2rem"
                color="warning"
              ></wb-icon>
              <span style="margin-left: 0.5rem; color: #666;">
                *ngIf="testNumber === 1"
              </span>
            </div>

            <div style="margin-bottom: 1rem;">
              <wb-icon 
                *ngIf="testString === 'ola' && !testBoolean" 
                name="heart"
                size="2rem"
                color="primary"
              ></wb-icon>
              <span style="margin-left: 0.5rem; color: #666;">
                *ngIf="testString === 'ola' && !testBoolean"
              </span>
            </div>

            <div style="margin-bottom: 1rem;">
              <wb-icon 
                *ngIf="activeSecondaryMenu?.icon === 'heart'" 
                name="heart"
                size="2rem"
                color="danger"
              ></wb-icon>
              <span style="margin-left: 0.5rem; color: #666;">
                *ngIf="activeSecondaryMenu?.icon === 'heart'"
              </span>
            </div>
          </div>
          <p class="demo-playground__status">
            String: "{{ testString || 'vac√≠o' }}" | 
            Boolean: {{ testBoolean }} | 
            Number: {{ testNumber }} |
            Men√∫ Icon: {{ activeSecondaryMenu?.icon || 'null' }}
          </p>
        </div>

        <div class="demo-playground__section">
          <h3>Prueba con Funciones</h3>
          <p class="demo-playground__hint">Prueba el comportamiento cuando se pasa una funci√≥n que devuelve el nombre del icono</p>
          <div class="demo-playground__icon">
            <div style="margin-bottom: 1rem;">
              <button (click)="cycleIcon()" style="margin-right: 1rem; padding: 0.5rem 1rem;">
                Cambiar Icono ({{ currentIconIndex + 1 }}/{{ iconList.length }})
              </button>
              <wb-icon 
                [name]="getIconName()"
                [variant]="getIconVariant()"
                size="2rem"
                color="primary"
              ></wb-icon>
              <span style="margin-left: 0.5rem; color: #666;">
                [name]="getIconName()" [variant]="getIconVariant()"
              </span>
            </div>

            <div style="margin-bottom: 1rem;">
              <wb-icon 
                [name]="getIconName()"
                size="2rem"
                color="success"
              ></wb-icon>
              <span style="margin-left: 0.5rem; color: #666;">
                [name]="getIconName()"
              </span>
            </div>

            <div style="margin-bottom: 1rem;">
              <button (click)="toggleTestBoolean()" style="margin-right: 1rem; padding: 0.5rem 1rem;">
                Toggle ({{ testBoolean }})
              </button>
              <wb-icon 
                [name]="getIconNameWithCondition()"
                size="2rem"
                color="warning"
              ></wb-icon>
              <span style="margin-left: 0.5rem; color: #666;">
                [name]="getIconNameWithCondition()"
              </span>
            </div>

            <div style="margin-bottom: 1rem;">
              <button (click)="toggleSecondaryMenu()" style="margin-right: 1rem; padding: 0.5rem 1rem;">
                {{ activeSecondaryMenu ? 'Ocultar' : 'Mostrar' }} Men√∫
              </button>
              <wb-icon 
                *ngIf="getIconNameFromMenu()"
                [name]="getIconNameFromMenu()"
                size="2rem"
                color="danger"
              ></wb-icon>
              <span style="margin-left: 0.5rem; color: #666;">
                *ngIf="getIconNameFromMenu()" [name]="getIconNameFromMenu()"
              </span>
            </div>

            <div style="margin-bottom: 1rem;">
              <wb-icon 
                *ngIf="getIconName() === 'heart'"
                [name]="getIconName()"
                size="2rem"
                color="primary"
              ></wb-icon>
              <span style="margin-left: 0.5rem; color: #666;">
                *ngIf="getIconName() === 'heart'"
              </span>
            </div>
          </div>
          <p class="demo-playground__status">
            Icono actual: {{ getIconName() }} | 
            Icono desde funci√≥n: {{ getIconNameWithCondition() }} |
            Icono desde men√∫: {{ getIconNameFromMenu() || 'undefined' }}
          </p>
        </div>

      </section>
      -->
      
    </div>
  </section>

  <wb-icon-editor-modal
    [icon]="selectedIcon"
    [isOpen]="isModalOpen"
    (modalClose)="handleModalClose()"
  ></wb-icon-editor-modal>
</main>
